{% extends 'blog/base.html' %}

{% block content %}

<main role="main" class="inner cover">
    <form id="form" method="POST">
        {% csrf_token %}
        <div id="carouselExampleCaptions" class="carousel slide" data-cycle="false" data-interval="false">
            <div class="carousel-inner">
            {% for field in form %}
                {% if forloop.counter == 1 %}
                    <div class="carousel-item active">
                {% else %}
                    <div class="carousel-item">
                {% endif %}
                    <div id={{ field.name }} class="inner cover">
                        <nav class="nav">
                            <ul class="nav justify-content-left">
                                <li class="nav-item">
                                {% if field.name == 'skolko' %}
                                    <a class="nav-link active" href="/" role="button">
                                        <button type="button" class="btn btn-secondary btn-sm">На главную</button>
                                    </a>
                                {% else %}
                                    <a class="nav-link active" href="#carouselExampleCaptions" role="button" data-slide="prev">
                                        <button type="button" class="btn btn-secondary btn-sm">Назад</button>
                                    </a>
                                {% endif %}
                                </li>
                            </ul>
                        </nav>
                        <h3 class="lead">Шаг {{forloop.counter}}/{{form.fields|length}} </h3>
                        <p class="lead">
                            <h1 class="cover-heading">{{field.field.label}}</h1>
                            <br/>
                            <table align="center" class="lead" id={{field.auto_id}}>
                                {% for choice in field.field.choices %}
                                <tr align="center" class="lead">
                                    <td class="lead">
                                            {% if field.name == 'komu' %}
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" name={{field.name}} value={{choice.0}} id={{field.auto_id}}_{{ forloop.counter }}>
                                                    <label class="custom-control-label" for="{{field.auto_id}}_{{ forloop.counter }}"> {{choice.1}}</label>
                                                </div>
                                            {% else %}
                                                <div class="custom-control custom-radio">
                                                    <input class="custom-control-input" type="radio" name={{field.name}} value={{choice.0}} id={{field.auto_id}}_{{ forloop.counter }}>
                                                    <label class="custom-control-label" for="{{field.auto_id}}_{{ forloop.counter }}"> {{choice.1}}</label>
                                                </div>
                                            {% endif %}
                                        </td>
                                    </tr>
                                {% endfor %}
                                {% if field.name == 'name' %}
                                    <tr align="center" class="lead">
                                        <td class="lead">
                                            <input class="form-control" type="text" name="name" id="id_name_input" maxlength="200" placeholder="Данила">
                                        </td>
                                    </tr>
                                {% elif field.name == 'phone' %}
                                    <tr align="center" class="lead">
                                        <td class="lead">
                                            <input class="form-control" type="tel" name="phone" id="id_phone" placeholder="+79214447344">
                                        </td>
                                    </tr>
                                {% endif %}
                            </table>
                            <br>
                        </p>    
                    </div>
                    {% if field.name == 'phone' %}
                        <div>
                            <button id="send-form-btn" class="btn btn-secondary btn-lg" type="submit" disabled="true">Сохранить</button>
                        </div>
                    {% else %}
                        <a href="#carouselExampleCaptions" role="button" data-slide="next">
                            <button id="next-{{ field.name }}-btn" class="btn btn-secondary btn-lg" disabled="true">Дальше</button>
                        </a>
                    {% endif %}
                </div>

                <!-- Добавить в отображение текущей формы -->
            <div id='alert' style="display: none" class="alert alert-dark" role="alert">
                Ответ на данный вопрос обезателен для определения стоимости банкротства !
              Если вы затрудняетесь ответить - воспользуйтесь нашим бесплатным сервисом проверки долгов !
                <button id="alert-close-btn" type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        {% endfor %}
        </div>
    </div>
</main>
{% load staticfiles %}
<script type="text/javascript" src="{% static 'blog/js/form.js' %}"></script>
{% endblock %}